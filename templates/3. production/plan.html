{% extends 'partials/base.html' %} 
{% load static %} 
{% block title %}Plan Page{% endblock %} 

{% block css %}
<link rel="stylesheet" href="{% static '/css/sideheader.css' %}" />

{% endblock %}

{% block content %}
{% block stylesheets %}
{% endblock stylesheets %}

<!-- Content Body Start -->

<div class="content-body">

  <!-- Page Headings Start -->
  <div class="row justify-content-between align-items-center mb-10">
    <!-- Page Heading Start -->
    <div class="col-12 col-lg-auto mb-20">
      <div class="page-heading">
        <h3 class="title">QLSX Spool <span>/ Kế hoạch sản xuất</span></h3>
      </div>
    </div>
    <!-- Page Heading End -->
  </div>
  <!-- Page Headings End -->

  <form method="POST" {% block action  %} action="/plan/" {% endblock action %} autocomplete="on" id="post-form">
    {% csrf_token %}
    <div class="form-row">
      <div class="form-group col-md-4">
        <label><strong>Chỉ thị sản xuất</strong></label>
        <input type="text" class="form-control" name="production_code" placeholder="Điền chỉ thị SX">
      </div>
      <div class="form-group col-md-4">
        <label><strong>Mã sản phẩm</strong></label>
        <input type="text" class="form-control" name="product_code" placeholder="Điền mã sản phẩm">
      </div>
      <div class="form-group col-md-4">
        <label><strong>Số lượng sản xuất</strong></label>
        <input type="text" class="form-control" name="product_quantity" placeholder="Điền số lượng">
      </div>
    </div>
    <br>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label><strong>Ngày phát hành chỉ thị</strong></label>
        <input type="date" class="form-control" name="issue_date">
      </div>
      <div class="form-group col-md-4">
        <label><strong>Ngày kết thúc chỉ thị</strong></label>
        <input type="date" class="form-control" name="end_date">
      </div>
      <div class="form-group col-md-4">
        <label>...</label>
        <button type="submit" class="form-control btn-send text-white">
          {% block bnt-action  %}<i class="fas fa-plus"></i>&nbsp;&nbsp; THÊM MÃ SẢN XUẤT {% endblock bnt-action  %}
        </button>  
      </div>
    </div>
  </form>  
  <br>
  <!--Input Production Plan Start-->
  <!--Plan Table Start-->
    <div class="row">
        <div class="col-20 mb-30">
          <div class="box">
            <div class="box-head">
              <h3 class="title">Kế hoạch sản xuất</h3>
            </div>
            <div class="box-body">
                <table class="table table-bordered table-striped" id="production-table" style="text-align: center;">
                    <thead class="table-dark">
                        <tr>
                            <th style="width: 5%">ID</th>
                            <th style="width: 7%">CTSX</th>
                            <th style="width: 7%">Mã SP</th>
                            <th style="width: 7%">Số lượng</th>
                            <th style="width: 7%">Dòng SP</th>
                            <th style="width: 5%">01</th>
                            <th style="width: 5%">02</th>
                            <th style="width: 5%">03</th>
                            <th style="width: 5%">04</th>
                            <th style="width: 5%">05</th>
                            <th style="width: 5%">06</th>
                            <th style="width: 5%">07</th>
                            <th style="width: 5%">08</th>
                            <th style="width: 5%">09</th>
                            <th style="width: 5%">10</th>
                            <th style="width: 5%">11</th>
                            <th style="width: 5%">12</th>
                            <th style="width: 5%">13</th>
                            <th style="width: 5%">14</th>
                            <th style="width: 5%">15</th>
                            <th style="width: 5%">16</th>
                            <th style="width: 5%">17</th>
                            <th style="width: 5%">18</th>
                            <th style="width: 5%">19</th>
                            <th style="width: 5%">20</th>
                            <th style="width: 5%">21</th>
                            <th style="width: 5%">22</th>
                            <th style="width: 5%">23</th>
                            <th style="width: 5%">24</th>
                            <th style="width: 5%">25</th>
                            <th style="width: 5%">26</th>
                            <th style="width: 5%">27</th>
                            <th style="width: 5%">28</th>
                            <th style="width: 5%">29</th>
                            <th style="width: 5%">30</th>
                            <th style="width: 5%">31</th>
                            <th style="width: 5%">Sửa</th>
                            <!--<th style="width: 15%">Xóa</th>-->
                        </tr>
                    </thead>
                    <tbody>
                      <!-- JSON Response from backend -->
                      {% for view_plan in production_plan %}
                      <tr>
                          <td>{{ view_plan.id }}</td>
                          <td>{{ view_plan.production_code }}</td>
                          <td>{{ view_plan.product_code }}</td>
                          <td>{{ view_plan.product_quantity }}</td>
                          <td>{{ view_plan.product_series }}</td>
                          <td>{{ view_plan.day_1 }}</td>
                          <td>{{ view_plan.day_2 }}</td>
                          <td>{{ view_plan.day_3 }}</td>
                          <td>{{ view_plan.day_4 }}</td>
                          <td>{{ view_plan.day_5 }}</td>
                          <td>{{ view_plan.day_6 }}</td>
                          <td>{{ view_plan.day_7 }}</td>
                          <td>{{ view_plan.day_8 }}</td>
                          <td>{{ view_plan.day_9 }}</td>
                          <td>{{ view_plan.day_10 }}</td>
                          <td>{{ view_plan.day_11 }}</td>
                          <td>{{ view_plan.day_12 }}</td>
                          <td>{{ view_plan.day_13 }}</td>
                          <td>{{ view_plan.day_14 }}</td>
                          <td>{{ view_plan.day_15 }}</td>
                          <td>{{ view_plan.day_16 }}</td>
                          <td>{{ view_plan.day_17 }}</td>
                          <td>{{ view_plan.day_18 }}</td>
                          <td>{{ view_plan.day_19 }}</td>
                          <td>{{ view_plan.day_20 }}</td>
                          <td>{{ view_plan.day_21 }}</td>
                          <td>{{ view_plan.day_22 }}</td>
                          <td>{{ view_plan.day_23 }}</td>
                          <td>{{ view_plan.day_24 }}</td>
                          <td>{{ view_plan.day_25 }}</td>
                          <td>{{ view_plan.day_26 }}</td>
                          <td>{{ view_plan.day_27 }}</td>
                          <td>{{ view_plan.day_28 }}</td>
                          <td>{{ view_plan.day_29 }}</td>
                          <td>{{ view_plan.day_30 }}</td>
                          <td>{{ view_plan.day_31 }}</td>
                          <!--<td>{{ production.ng_quantity }}</td>
                          <td>{{ production.stage }}</td>
                          <td>{{ production.employee_name }}</td>-->
                          <td>
                            <a class="btn btn-dark text-center" title="Sửa dữ liệu" data-bs-toggle="modal" data-bs-target="#editPlanModal{{ view_plan.pk }}">
                                <i class="fas fa-pen" style="color:#fff;"></i>
                          </td> 
                      </tr>
                      <!-- Incldude -->
                      {% include '3. production/edit_plan.html' %}

                      {% endfor %}
                    </tbody>
                </table>
            </div>
          </div>
        </div>
      </div>
  <!--Plan Table End-->
  <!--Input Production Plan End-->
</div>

<!-- Content Body End -->


{% endblock %}


{% block js %}

<!-- Plugins & Activation JS For Only This Page -->

<!--Display Side header-->

<script src="{% static '/js/plugins/datatables/datatables.min.js' %}"></script>

<script src="{% static '/js/plugins/datatables/datatables.active.js' %}"></script>

<script src="{% static '/js/plugins/moment/moment.min.js' %}"></script>
<script src="{% static '/js/plugins/footable/footable.min.js' %}"></script>
<script src="{% static '/js/plugins/footable/footable.active.js' %}"></script>

<script src="{% static '/js/ajax.js' %}"></script>

<script>
    $(document).ready(function() {
        $('#production-table thread tr')
            .clone(true)
            .addClass('filters')
            .appendTo('#production-table thread');

        var table = $('#production-table').DataTable({
            // "ajax": "/json",
            // "columns": [
            //     {"data": "id"},
            //     {"data": "name"},
            //     {"data": "email"},
            //     {"data": "occupation"},
            //     {"data": "salary"},
            //     {"data": "gender"},
            // ],
            // Datatables configurations
            paging: true, // Pagination
            pageLength: 12, // Data per page
            lengthChange: true, // Show entries per page
            autoWidth: false, // Control the auto width on columns
            searching: true, // Input search
            bInfo: true, // Infor on footer
            bSort: true, // Filter A to Z and Z to A
            order: [],
            responsive: false,
            // Disable columns with specific filter A to Z
            //"columnDef": [{
            //    //"targets": 5,
            //    "targets": [4,5],
            //    "orderable": false
            //}]
            dom: 'lBfrtip',
            //buttons: ["copy", "csv", "excel", "pdf", "print"],
            buttons: [
                {   
                    extend: 'copy',
                    text: 'copy',
                    className: 'btn btn-secondary',
                    titleAttr: 'Copy',
                    exportOptions: {
                        columns: [0, 1, 2, 3, 4, 5]
                    },
                },
                {
                    extend: 'excel',
                    text: 'excel',
                    className: 'btn btn-secondary',
                    titleAttr: 'excel',
                    exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5]
                    },
                },
                {
                    extend: 'pdf',
                    text: 'pdf',
                    className: 'btn btn-secondary',
                    titleAttr: 'PDF',
                    exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5]
                    },
                    tableHeader: {
                    alignment: 'center'
                    },
                    //customize: function (doc) {
                    //doc.style.tableHeader.alignment = 'center'; // Header position
                    //doc.style.tableBodyOdd.alignment = 'center'; // Body position 1 (grey)
                    //doc.style.tableBodyEven.alignment = 'center'; // Body position 1 (white)
                    //doc.style.tableHeader.fontSize = 7; // Header font-size
                    //doc.defaultStyle.fontSize = 6; // Body font-size
                    // To get 100% width of the table
                    //doc.content[1].table.widths = Array(doc.content[1].table.body[1].length + 1).join('*').split('');
                    //},
                },
                {
                    extend: 'print',
                    text: 'print',
                    className: 'btn btn-secondary',
                    titleAttr: 'print',
                    exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5]
                    },
                    customize: function (win) {
                    $(win.document.body).css('font-size','10pt'),
                    $(win.document.body).find('table')
                        .addClass('compact')
                        .css('font-size', 'inherit');
                    }
                },
            ]            
        });
    });
</script>

{% endblock %}